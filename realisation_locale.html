<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- titre de la page (onglet) -->
    <title>Veille informatique</title>
    <!-- Icone de l'onglet -->
    <link rel="shortcut icon" href="./img/icone2.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./CSS sheets/mainstyle.css">
    <link rel="stylesheet" href="./CSS sheets/slide.css">
    <link rel="stylesheet" href="./CSS sheets/darkmode.css">
    <link rel="stylesheet" href="./CSS sheets/footer.css">
    <link rel="stylesheet" href="./CSS sheets/scrollbar.css">
    <link rel="stylesheet" href="./CSS sheets/img-tilt.css">
    <link rel="stylesheet" href="./CSS sheets/real.css">
</head>
<body class="light">
    <div class="scrollbar"></div>
    <div class="clickScrollbar"></div>
    <label>
        <div class="sidebar-container">
        <input type="checkbox">
        <div class="toggle">
            <span class="top_line common"></span>
            <span class="middle_line common"></span>
            <span class="bottom_line common"></span>
        </div>

        <div class="slide">
            <h1>VEILLE</h1>
            <ul>
                <li><a href="./index.html"><i class="fas fa-question"></i>Accueil</a></li>
                <li><a href="./top10owasp/controles_dacces_defaillants.html"><i class="fas fa-eye"></i>Contrôles d'accès défaillants</a></li>
                <li><a href="./top10owasp/defaillances_cryptographiques.html"><i class="fas fa-diagram-project"></i>Défaillances cryptographiques</a></li>
                <li><a href="./top10owasp/injection_sql.html"><i class="fas fa-database"></i>Injection</a></li>
                <li><a href="./top10owasp/conception_non_securisee.html"><i class="fas fa-bug"></i>Conception non sécu.</a></li>
                <li><a href="./top10owasp/mauvaise_configuration_securite.html"><i class="fas fa-user-secret"></i>Mauvaise config. sécurité</a></li>
                <li><a href="./top10owasp/composants_vulnerables.html"><i class="fas fa-laptop"></i>Composants vulnérables</a></li>
                <li><a href="./top10owasp/authentification.html"><i class="fas fa-address-card"></i>Authentification</a></li>
                <li><a href="./top10owasp/integrite_des_donnes.html"><i class="fas fa-upload"></i>Intégrité des données</a></li>
                <li><a href="./top10owasp/systemes_de_controle.html"><i class="fas fa-cogs"></i>Systèmes de contrôle</a></li>
                <li><a href="./top10owasp/falsification_de_requete_cote_serveur.html"><i class="fas fa-server"></i>Requête côté serveur</a></li>
                <li><a href="#"><i class="fas fa-copy"></i><b>Réalisation locale</b></a></li>
                <li><a href="./top10owasp/ressources.html"><i class="fas fa-book"></i>Ressources</a></li>
            </ul>
            <span class="tag">ARON Noa CESI 2023/2024 </span>
        </div>
        </div>
    </label>

    <div class="darkmode-btn">
        <button>
            <img class="toggle-darkmode-img" src="./img/MoonDarkmode.png" alt="Moon">
        </button>
    </div>

    <div class="real-flex">
        <div class="contenu">
            <p>
                Voici la réalisation de manière locale d’une application web simulant la connexion d’un utilisateur. 
                Nous sécuriserons cela face aux injections SQL et hacherons les mots de passes des utilisateurs. <br><br>

                Nous avons donc commencé par créer localement notre fichier de connexion « index.php » avec un code basique.
                Le formulaire est en méthode POST, évidemment pour éviter le renvoi de requête dans l’url directement.
            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/index.php_basique.jpg" target="_blank"><img src="./img/Screens/screen_real_local/index.php_basique.jpg" alt="index_php_basique" width=45% height=45%></a>
            </div>

            <p>
                Simulant un simple formulaire de connexion. 
                Créons la base de données avec phpmyadmin intégrer dans le dashboard localhost de xampp. <br><br>

            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/creation_bdd.jpg" target="_blank"><img src="./img/Screens/screen_real_local/creation_bdd.jpg" alt="creation_bdd" width=45% height=45%></a>
            </div>

            <p>
                2 colonnes sont seulement nécessaires dans cet exemple, car nous prenons en compte uniquement l’identifiant et le mot de passe de l’utilisateur.
                Insérons un combo identifiant pour tester la connexion plus tard.
            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/insert_into.jpg" target="_blank"><img src="./img/Screens/screen_real_local/insert_into.jpg" alt="insert_into" width=45% height=45%></a>
            </div>

            <p>
                Nous créons un script php pour vérifier la connexion à la base de données.
            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/verification_connexion.jpg" target="_blank"><img src="./img/Screens/screen_real_local/verification_connexion.jpg" alt="insert_into" width=45% height=45%></a>
            </div>

            <p>
                Définition des informations de connexion : <br><br>

                $servername: C'est l'adresse du serveur MySQL, généralement "localhost" lorsqu'il s'agit de la même machine que le script PHP. <br><br>
                
                Création de l'objet de connexion : <br>
                La fonction mysqli() est utilisée pour créer une nouvelle instance de la classe mysqli, qui représente la connexion à la base de données.
                Les paramètres fournis sont respectivement l'adresse du serveur, le nom d'utilisateur, le mot de passe, le nom de la base de données et le numéro de port (3306 par défaut pour MySQL).
                Cette connexion est stockée dans la variable $conn. <br><br>
                Vérification de la connexion : <br>

                La condition if($conn->connect_error) vérifie si une erreur s'est produite lors de la connexion.
                Si une erreur est détectée, le script s'arrête en utilisant la fonction die() pour afficher un message d'erreur indiquant la raison de l'échec de la connexion. Le message est concaténé avec $conn->connect_error, qui contient la description de l'erreur.
                Affichage d'un message de réussite : <br><br>
                Si la connexion est établie avec succès, le message "Connexion réussie" est affiché à l'écran grâce à la fonction echo. <br><br><br><br>

                Nous créons ensuite une page PHP login.
            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local//login_php.jpg" target="_blank"><img src="./img/Screens/screen_real_local/login_php.jpg" alt="login_php" width=45% height=45%></a>
            </div>

            <p>
                include('connexion.php');: Cette instruction inclut le fichier connexion.php, qui est supposé contenir le code de connexion à la 
                base de données MySQL. Cela permet d'établir une connexion à la base de données avant d'exécuter les requêtes SQL. <br><br>

                if (isset($_POST['submit'])) { ... }: Cette condition vérifie si le formulaire a été soumis. Le nom du bouton de soumission du formulaire est 
                généralement 'submit', donc si ce bouton est présent dans les données POST, le formulaire a été soumis. <br><br>

                Récupération des données du formulaire : Les valeurs des champs de formulaire 'utilisateur' et 'pass' sont récupérées à l'aide de la superglobale $_POST et stockées dans les variables 
                $identifiant et $password respectivement. <br><br>
                Construction de la requête SQL : Une requête SQL est construite pour sélectionner toutes les lignes de la table 'login' où l'identifiant correspond à celui fourni dans le champ 'utilisateur' et le mot de passe correspond à celui fourni dans le champ 'pass'.
                
                <br><br>
                
                Exécution de la requête SQL : La fonction mysqli_query() est utilisée pour exécuter la requête SQL en utilisant la connexion à la base de données $conn et stocke le résultat dans la variable $result.
                <br><br>
                
                Traitement du résultat : La fonction mysqli_fetch_array() est utilisée pour récupérer la première ligne de résultat sous forme de tableau associatif dans la variable $row. Ensuite, la fonction mysqli_num_rows() est utilisée pour compter le nombre de lignes retournées par la requête et stocke ce nombre dans la variable $count.
                
                <br><br>
                
                Vérification des informations d'identification : Si le nombre de lignes retournées est égal à 1, cela signifie qu'une correspondance a été trouvée pour les informations d'identification fournies. Dans ce cas, la fonction header() est utilisée pour rediriger l'utilisateur vers la page "bienvenue.php".
                
                <br><br>
                Gestion de l'échec de connexion : Si aucune correspondance n'est trouvée pour les informations d'identification fournies, un message d'alerte est affiché à l'utilisateur indiquant que la connexion a échoué en raison d'un identifiant ou d'un mot de passe invalide. Ensuite, l'utilisateur est redirigé vers la page "index.php" à l'aide de JavaScript.
            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/authentification_reussie.jpg" target="_blank"><img src="./img/Screens/screen_real_local/authentification_reussie.jpg" alt="authentification réussie" width=45% height=45%></a>
            </div>

            <p>
                Nous arrivons bien à nous connecter. 
                En cas d’échec cette notification apparaitra alors :
            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/erreur_authentification.jpg" target="_blank"><img src="./img/Screens/screen_real_local/erreur_authentification.jpg" alt="erreur authentification" width=45% height=45%></a>
            </div>

            <p>
                Mais les mots de passes de nos utilisateurs ne sont pas hachés et par conséquent non sécurisés. Nos utiliserons des « salts ». 
                Nous allons additionner plusieurs clés, celles-ci devant rester secrète sur un fichier de configuration. En d’autres termes, 
                nous rajoutons une chaine aléatoire au mot de passe avant de le hacher. L’utilisation d’un sel permet que même si deux 
                utilisateurs ont le même mot de passe, leur hachage seront différents. <br><br>
                Notre exemple prendra en compte deux graines :
            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/double_graine.jpg" target="_blank"><img src="./img/Screens/screen_real_local/double_graine.jpg" alt="graines" width=45% height=45%></a>
            </div>

            <p>
                Simple affichage :
            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/simple_affichage.jpg" target="_blank"><img src="./img/Screens/screen_real_local/simple_affichage.jpg" alt="affichage" width=45% height=45%></a>
            </div>

            <p>
                Cependant ce hachage est obsolète en matière de sécurité. Le mot de passe étant retrouvé à partir de son hachage au cours 
                du temps a réduit sa popularité (ce n’est pas peu dire). Utilisons donc le Sha256 qui est encore à jour et qui produit un 
                hachage bien plus long. Pour le même mot de passe voici la différence :
            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/difference_hachage.jpg" target="_blank"><img src="./img/Screens/screen_real_local/difference_hachage.jpg" alt="diff_hachage" width=45% height=45%>
            </div>

            <p>
                Empêchons rapidement les injections sql. PHP propose plein d’outils de nos jours pour nous faciliter la tâche. Comme vu 
                dans le rapport il est important de vérifier toutes les entrées de l’utilisateur et ne pas compter sur sa bienveillance. <br><br>
                Vérifions donc ses entrées :

            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/verification_entrees.jpg" target="_blank"><img src="./img/Screens/screen_real_local/verification_entrees.jpg" alt="verif" width=45% height=45%>
            </div>

            <p>
                Cette ancienne fonction vérifie si les guillemets magiques sont activés en appelant la fonction get_magic_quotes_gpc(). <br> 
                Les guillemets magiques étaient une fonctionnalité de PHP qui ajoutait automatiquement des barres obliques inverses () 
                aux guillemets simples ('), aux guillemets doubles (") et aux caractères NULL lors de la soumission de données de formulaire. 
                Cette fonctionnalité était couramment utilisée pour protéger contre les injections SQL, mais elle est obsolète depuis PHP 5.4.0 
                et a été supprimée dans PHP 7.0.0. <br><br>

                La meilleure façon est d’utiliser des requêtes préparées.
            </p>

            <div class="img-container">
                <a class ="real-flex" href="./img/Screens/screen_real_local/requetes_preparees.jpg" target="_blank"><img src="./img/Screens/screen_real_local/requetes_preparees.jpg" alt="requêtes préparées" width=50% height=50%>
            </div>

            <p>
                Ici, nous avons une requête préparée avec des marqueurs de paramètres. Les valeurs réelles sont liées aux marqueurs de 
                paramètres à l’aide de la fonction : mysqli_stmt_bind_param(), garantissant que les valeurs soient traitées en toute sécurité et 
                empêche les injections SQL.
            </p>
        </div>
    </div>

    <div class="prefooter-flex">
        <div class="flex-container"></div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="footer-col">
                    <h4>à propos</h4>
                    <ul>
                        <li><a href="#">sujet</a></li>
                        <li><a href="#">difficultés</a></li>
                        <li><a href="#">informations supplémentaires</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>veille</h4>
                    <ul>
                        <li><a href="./Aron Noa_Veille Techno_2024.pdf" download="Aron Noa_Veille Techno_2024.pdf">Télécharger le rapport</a></li>
                        <li><a href="https://www.cesi.fr" target="_blank">CESI</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>réseaux</h4>
                    <div class="réseaux-sociaux">
                        <a href="https://www.linkedin.com/in/aronnoa/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://github.com/Nayxooo" target="_blank"><i class="fab fa-github"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tilt.js/1.2.1/tilt.jquery.min.js"></script>
    <script src="./script.js"></script>
</body>
</html>